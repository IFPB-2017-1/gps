<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/layout.xhtml">
	<ui:define name="title">Defesas</ui:define>

	<ui:define name="body">
		<p:panel header="Defesas" id="painelDefesa">
		<p:panel header="TCC's" id="listaTCC">
				<p:dataTable var="tcc" value="#{manterDefesaBean.tccLista}" emptyMessage="Nenhuma TCC cadastrado">
					<p:column headerText="Título" >
						<h:outputText value="#{tcc.titulo}"/>
					</p:column>
					<p:column headerText="Discente">
						<h:outputText value="#{tcc.discente.usuario.nome}"/>
					</p:column>
					<p:column headerText="Orientador">
						<h:outputText value="#{tcc.orientador.usuario.nome}"/>
					</p:column>
					<p:column headerText="Tipo">
						<h:outputText value="#{tcc.tipo}" />
					</p:column>
					<p:column headerText="Ações" style="width:5%;">
						<h:form>
							<h:commandLink title="Agendar Defesa" actionListener="#{incluirEditarDefesaBean.carregaTcc(tcc)}"
							 action="incluirEditarDefesa?faces-redirect=true" styleClass="glyphicon glyphicon-plus"  />
						</h:form>
					</p:column>
				</p:dataTable>
			</p:panel>
			
			<p:panel header="Lista de defesas" id="listaDefesas">
				<p:dataTable value="#{manterDefesaBean.defesas}" var="defesa"
					emptyMessage="Nenhuma defesa cadastrada ou agendada">
					<p:column headerText="TCC">
						<h:outputText value="#{defesa.tcc.titulo}" />
					</p:column>
					<p:column headerText="Local">
						<h:outputText value="#{defesa.local}" />
					</p:column>
					<p:column headerText="Avaliadores">
						<h:outputText value="#{defesa.avaliadores}" />
					</p:column>
					<p:column headerText="Data da defesa">
						<h:outputText value="#{defesa.data}">
							<f:convertDateTime pattern="dd/MM/yyyy"/>
						</h:outputText> 
						<h:outputText value=" das #{defesa.horaInicio} às #{defesa.horaFim}" rendered="#{defesa.horaInicio != null}"/>
					</p:column>
					<p:column headerText="Situação">
						<h:outputText value="#{defesa.situacao.descricao}" />
					</p:column>
					<p:column headerText="Ações" style="width:7%">
						<h:form id="formEditar">
							<h:commandLink title="Editar"
								actionListener="#{incluirEditarDefesaBean.carregarDefesa(defesa)}"
								action="incluirEditarDefesa?faces-redirect=true"
								styleClass="glyphicon glyphicon-edit" />
							<p:commandLink title="Excluir"
								actionListener="#{incluirEditarDefesaBean.excluirDefesa(defesa)}"
								style="margin-left:10px" styleClass="glyphicon glyphicon-remove"
								ajax="true" update="@(.ui-panel)" />
						</h:form>
					</p:column>
				</p:dataTable>
			</p:panel>
		</p:panel>
	</ui:define>
</ui:composition>
</html>
